---
title: Muti-sectionROV
author: creative shape to better explore the sea
layout: post
order: 2
---
<!-- Text stuff -->
<h2>简介</h2>
<p>
	&emsp;	&#8195;多节式航行器的设计理念是通过增加整个ROV的长度来不断减小其宽度,使之比一般的rov来说具备更加灵活的外形特点,
	利用极窄的宽度可以对海平面以下一些复杂的地形(如狭缝)进行探索,该ROV分为三个部分,每个部分的都能灵活运动,进而大大提升了组成整体的灵活性,
	灵活的关节使得该航行器可进行多种工作模式,目前已经具备的有:直线型工作模式(普通模式)、梯形工作模式、闪电型工作模式,并且多种模式之间可以通过
	远程遥控任意切换,进一步开拓其应用场景。
	<br /> &emsp;	&#8195;该项目从机械层面的外壳、密封到硬件方面的底层
	电路板的设计、底层控制以及遥控器,再到软件方面的识别与上层控制均为原创,相关资料借鉴或其他各种用途请邮件联系。
</p>
	<hr />

	<!-- Image -->
	<h2>项目图片</h2>

	<div class="row">
    <div class="4u 12u$(mobile)">
      <div class="item">
        <a href="#" class="image fit"><img src="{{ 'assets/images/DuoJieXRT.jpg' | relative_url }}" alt="PicofWuLiang" /></a>
        <header>
          <h3>渲染图</h3>
        </header>
      </div>
      <div class="item">
        <a href="#" class="image fit"><img src="{{ 'assets/images/DuoJieCPT.jpg' | relative_url }}" alt="Rhoncus Semper" /></a>
        <header>
          <h3>实物俯视图</h3>
        </header>
      </div>
    </div>
	
    <div class="4u 12u$(mobile)">
		 
      <div class="item">
        <a href="#" class="image fit"><img src="{{ 'assets/images/DuoJieController.jpg' | relative_url }}" alt="Magna Nullam" /></a>
        <header>
          <h3>遥控</h3>
        </header>
		
      </div>
      <div class="item">
        <a href="#" class="image fit"><img src="{{ 'assets/images/DuoJieGPS.png' | relative_url }}" alt="Natoque Vitae" /></a>
        <header>
          <h3>GPS定位图像</h3>
        </header>
      </div>
    </div>

    <div class="4u$ 12u$(mobile)">
      <div class="item">
        <a href="#" class="image fit"><img src="{{ 'assets/images/DuoJieRG.png' | relative_url }}" alt="Dolor Penatibus" /></a>
        <header>
          <h3>绕杆航行</h3>
        </header>
      </div>
      <div class="item">
        <a href="#" class="image fit"><img src="{{ 'assets/images/DuoJieTS.png' | relative_url }}" alt="Orci Convallis" /></a>
        <header>
          <h3>梯形工作模式</h3>
        </header>
      </div>
    </div>
  </div>
	<hr />
	
	<!-- protrait -->
	<h2>项目特点</h2>

	<div class="row">
			
			<ul>
				<li>创新性外观,解锁更多地形探索能力</li>
				<li>三种工作模式,更强大的工作场景适应性</li>
				<li>全自主设计</li>
				<li>全方向移动,能够完成潜航、自转、定深、穿门等一系列水下动作</li>
				<li>搭载摄像头,水下信息采集</li>

			</ul>

	</div>		
	<hr />

	<!--  details -->
	<h2>详细资料</h2>

	<h3>A.总体框架</h3>
	<p><span class="image left"><img src="{{ 'assets/images/DuoJieZKJ.png' | relative_url }}" alt="" /></span>
		&emsp;	&#8195;该机器人硬件平台采用模块化的设计,主要分为主控模块、电源模块、驱动模块、通信模块、扩展模块等,
		各模块主要围绕STM32F103ZET6进行搭建。最终要使机器人做到上浮、下潜、转向以及探测管道所需的主要动作,需要通过主控芯片与其他模块的通信来实现。
	</p>

	<h3>B.具体方案</h3>
	<h4>1.主控 </h4>
	<p>
		&emsp;	&#8195;我们的主控芯片采用STM32F103ZET6。该芯片使用高性能的ARM® Cortex™-M3 32位的RISC内核,工作频率为72MHz,内置高速存储器(高达512K字节的闪存和64K字节的SRAM),
		丰富的增强I/O端口和联接到两条APB总线的外设,其包含3个12位的ADC、4个通用16位定时器和2个PWM定时器,还包含标准和先进的通信接口:
		多达2个I2C接口、3个SPI接口、2个I2S接口、1个SDIO接口、5个USART接口、一个USB接口和一个CAN接口,可以达到同时和上位机、舵机、电机以及其他芯片通信。
		该主控芯片的性能强大,资源丰富,完全满足本项目的需求,同时给日后项目的升级留下了很大的空间。主控板上预留IIC接口,PWM波输出通道,多个串口,以及多路模拟输入(AD)输出(DA)接口。
		串口1、2、3用来和上位机、无线通信模块进行通信,以便数据传输和调试。IIC接口用来与姿态控制芯片进行通信,多个PWM波输出通道用于控制舵机和电机,SPI接口可与闪存和其他拓展设备通信,
		多路输入输出接口用于其他功能模块的添加，如电压检测等。
	</p>
	<h4>2.电源 </h4>
	<p>
		&emsp;	&#8195;电源模块要对系统各部分提供动力能源。电源我们暂选标压6S锂电池,满足水下机器人在水下完成各项工作、安全返回的需要,
		保证了机器人的续航时间。除次电池外,另预留备用空间安装备用电池,以便今后机器人的升级与拓展。 <br />
		&emsp;	&#8195;整个电源系统通过降压模块和稳压模块分为多路为舵机、螺旋桨和主控板提供稳定的电压,保证各模块稳定运行,
		另分一路便于电压检测,在电池电量不足时发出提醒,防止电量不足影响各个模块的运行,甚至发生意外。
	</p>
	<h4>3.驱动 </h4>
	<p>
		&emsp;	&#8195;我们选用DG3150MG作为舵机,其体积小巧、重量合适而且能够提供足够的扭矩,能够保证机器人两端的正常转动;螺旋桨采用含电调的水下电机,动力充足。 <br />
		&emsp;	&#8195;舵机和螺旋桨通过PWM波控制,由于需要较多PWM通道,我们选用PCA9685模块作为PWM输出,
		该模块只需要占用一个IIC接口即可产生16路PWM,有效节约主控板资源。通过操控主控芯片与PCA9685通信,即可驱动舵机和螺旋桨。
	</p>
	<h4>4.通信 </h4>
	<p>
		&emsp;	&#8195;通信模块采用ATK-LORA-01无线串口,模块设计是采用高效的ISM频段射频SX1278扩频芯片,模块的工作频率410Mhz~441Mhz,
		以1Mhz频率为步进信道,共32个信道,接收灵敏度达-136dBm,传输距离3000米。通过LORA无线串口,机器人可以与上位机进行通讯,
		实现传输实时图像和上位机对机器人实时控制。
	</p>
	<h4>5.姿态控制 </h4>
	<p>
		&emsp;	&#8195;姿态控制模块采用MPU6050六轴传感器,该芯片内部整合了3轴陀螺仪和3轴加速度传感器,
		并可利用自带的数字运动处理器(DMP: Digital Motion Processor)硬件加速引擎,采用高性能的微处理器和先进的动力学解算与卡尔曼动态滤波算法,
		能够快速求解出模块当前的实时运动姿态,同时采用先进的数字滤波技术,能有效降低测量噪声,提高测量精度。通过主IIC接口,向应用端输出姿态解算后的数据。 <br />
		&emsp;	&#8195;主控芯片可从MPU6050读取数据,获得姿态角(PITCH、ROLL、YAW),
		从而实时观测、调整水下机器人的姿态,通过进一步的算法可以保证机器人运动的稳定性,同时提高操控精度,使机器人实现精准上浮、下潜、滚转
	</p>
	<h4>6.定深控制 </h4>
	<p>
		&emsp;	&#8195;压强传感器MS5837可对感知到的数据进行采集,主控芯片通过IIC接口可读取压强传感器数据并由此确定水下压强,
		感知流体水动力的变化情况,获取机器人所在深度,进行定深航行,而且对于将来机器人功能的拓展有很大帮助。
	</p>
	
	<h3>C.上层控制</h3>
	<p>总体控制思路为人工控制加以PID自动辅助控制</p>
	<h4>1.人工控制 </h4>
	<p><span class="image left"><img src="{{ 'assets/images/DuoJieYKQ.png' | relative_url }}" alt="" /></span>
		&emsp;	&#8195;基于航行器运动方式与功能,我们制作了遥控器,包含主控芯片以及两个摇杆、无线串口，旋转电位器等,
		可实现无级变速,接收航行器状态并通过指示灯反应出来。遥控器与航行器之间设置通信协议,防止信号干扰以及数据传输过程中出现错误。
	</p>
	<h4>2.基于PID算法的辅助控制</h4>
	<p><span class="image left"><img src="{{ 'assets/images/DuoJieXHT.png' | relative_url }}" alt="" /></span>
		&emsp;	&#8195;PID即:Proportional(比例)、Integral(积分)、Differential(微分)的缩写。
		PID控制的实质就是根据输入的偏差值,按照比例、积分、微分的函数关系进行运算,运算结果用以控制输出。 <br />
		&emsp;	&#8195;我们通过PID算法基本公式推出增量式PID公式以减小数据量,运用到航行器中,分析传感器获得的各种数据,维持不同模式下下航行器的稳定姿态。
		为方便叙述,对航行器各个螺旋桨记序号如图。 <br />
		航行器不断采集水下压强数据和俯仰角、滚转角等姿态数据,在对应的运动情况下不断比较设定值和采样值,通过增量式PID算法调节对应输出值,
		保证航行器平稳运行。在实际操作过程中,需要对成型的航行器进行实地的调参,来确定能使航行器姿态稳定的最合适参数,这需要进行大量的实验工作,
		才能得到最优的参数和对于此航行器最佳的PID响应。<br />
		&emsp;	&#8195;在运动模式下,航行器通过1、2、3、4四个螺旋桨实现前进、后退,通过1、3和2、4的差速实现转向,同时PID算法自动控制6号螺旋桨,
		配合前后稳定翼实现定深航行。上浮和下潜时,改变舵机角度,配合螺旋桨,使航行器在竖直平面内转动一定角度,到达所需角度后,遥控器发送指令使航行器伸直,
		控制1、2、3、4号螺旋桨运动实现上浮与下潜。到达目标深度后,发送自动调平指令,航行器采集俯仰角,通过PID算法自动控制舵机角度调平航行器以实现定深航行。 <br />
		&emsp;	&#8195;在工作模式下,水平运动时遥控器控制5、7号螺旋桨进行前进后退以及差速转向,通过PID算法自动控制6号螺旋桨和1、2、3、4号螺旋桨,
		同时实现定深和平衡力矩、消除横滚。竖直运动时,遥控器控制6号螺旋桨实现上浮下潜,当上浮下潜指令发送结束后,6号螺旋桨受PID自动控制,实现定深。 <br />
		&emsp;	&#8195;两种工作模式由遥控器实现一键切换，通过指示灯显示。
	</p>


	<hr />